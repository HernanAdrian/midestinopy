document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("locationFilter"),t=document.getElementById("typeFilter"),a=document.getElementById("propertiesGrid");let n=[];function o(e){a&&(a.innerHTML="",0!==e.length?e.forEach(e=>{const t=function(e){const t=document.createElement("article");t.className="property-card";let a="assets/images/placeholders/default.jpg";e.images&&e.images.length>0&&(a=e.images[0].replace(/^\//,""));let n="";e.badge&&(n=`<div class="property-badge">${e.badge}</div>`);let o="";e.capacity&&(o+=`<span>ğŸ‘¥ ${e.capacity}</span>`);e.amenities.pool&&(o+="<span>ğŸŠ Piscina</span>");e.amenities.grill&&(o+="<span>ğŸ”¥ Quincho</span>");const i=window.propertiesData.getPropertyUrl(e),s="quinta"===e.type?"Quinta":"cabana"===e.type?"CabaÃ±a":"posada"===e.type?"Posada":"hotel"===e.type?"Hotel":"Alojamiento";return t.innerHTML=`\n            <div class="property-image-container">\n                <img src="${a}" alt="${e.name} - ${s} en ${e.city} con piscina para alquiler" loading="lazy" width="634" height="422" decoding="async">\n                ${n}\n            </div>\n            <div class="property-content">\n                <h3 class="property-title">${e.name}</h3>\n                <p class="property-location">ğŸ“ ${e.city}</p>\n                ${e.rating?`<div class="property-rating">â­ ${e.rating} (${e.reviews})</div>`:""}\n                <div class="property-features">\n                    ${o}\n                </div>\n                <div class="property-footer">\n                    <div class="price">${e.priceRange||"Consultar"}<span>/dÃ­a</span></div>\n                    <a href="${i}" class="btn-card">Ver mÃ¡s â†’</a>\n                </div>\n            </div>\n        `,t}(e);a.appendChild(t)}):a.innerHTML='<p class="no-results">No encontramos propiedades con esos filtros. Intenta otra bÃºsqueda.</p>')}function i(){if(!e||!t)return;const n=e.value,i=t.value;let s=window.propertiesData.properties;"all"!==n&&(s=s.filter(e=>e.city===n)),"all"!==i&&(s=s.filter(e=>e.type===i)),o(s),a&&a.scrollIntoView({behavior:"smooth",block:"start"})}!function(){window.propertiesData?(n=window.propertiesData.properties,function(){if(!e||!window.propertiesData)return;window.propertiesData.getCitiesList().forEach(t=>{const a=document.createElement("option");a.value=t,a.textContent=t,e.appendChild(a)})}(),o(n.filter(e=>e.featured))):console.error("Error: properties-data.js no cargado.");document.querySelector(".search-btn")&&document.querySelector(".search-btn").addEventListener("click",i)}()}),window.scrollToProperties=function(){const e=document.getElementById("propertiesGrid");e&&e.scrollIntoView({behavior:"smooth"})},document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".menu-toggle"),t=document.querySelector(".nav-menu");e&&t&&(e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("active");const a="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!a),document.body.style.overflow=t.classList.contains("active")?"hidden":""}),document.addEventListener("click",a=>{t.contains(a.target)||e.contains(a.target)||!t.classList.contains("active")||(e.classList.remove("active"),t.classList.remove("active"),e.setAttribute("aria-expanded","false"),document.body.style.overflow="")}),document.addEventListener("keydown",a=>{"Escape"===a.key&&t.classList.contains("active")&&(e.classList.remove("active"),t.classList.remove("active"),e.setAttribute("aria-expanded","false"),document.body.style.overflow="")}),t.querySelectorAll("a").forEach(a=>{a.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("active"),e.setAttribute("aria-expanded","false"),document.body.style.overflow=""})}))});